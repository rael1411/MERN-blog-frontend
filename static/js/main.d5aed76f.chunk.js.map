{"version":3,"sources":["components/Footer.js","context/AuthProvider.js","hooks/useAuth.js","api/axios.js","components/Header.js","hooks/useRefreshToken.js","hooks/useAxiosPrivate.js","components/SureCheck.js","components/Post.js","components/Main.js","components/Home.js","components/Comment.js","components/CommentForm.js","components/PostDetails.js","components/LoginForm.js","components/Login.js","components/Unauthorized.js","components/RequireAuth.js","components/PersistLogin.js","components/PostForm.js","components/WritePost.js","components/UnpublishedPosts.js","components/EditForm.js","components/EditPost.js","App.js","reportWebVitals.js","index.js"],"names":["Footer","AuthContext","createContext","AuthProvider","children","useState","auth","setAuth","JSON","parse","localStorage","getItem","persist","setPersist","Provider","value","useAuth","useContext","useDebugValue","accessToken","BASE_URL","axios","create","baseURL","axiosPrivate","headers","withCredentials","Header","navigate","useNavigate","React","logout","a","console","error","className","onClick","useRefreshToken","refresh","get","response","prev","data","useAxiosPrivate","useEffect","requestIntercept","interceptors","request","use","config","err","Promise","reject","responseIntercept","prevRequest","status","sent","newAccessToken","eject","SureCheck","props","handleDelete","handleToggle","Post","commentCount","setCommentCount","loading","setLoading","displaySure","setDisplaySure","toggleSure","prevDisplaySure","delete","post","_id","window","location","reload","link","then","res","displayText","text","split","map","item","counter","remarkPlugins","gfm","date","Date","timestamp","to","title","user","username","getHours","getMinutes","toLocaleDateString","undefined","weekday","year","month","day","count","Main","postsData","setPostsData","loadingSpinner","posts","App","Div","styled","div","Content","p","Author","small","Comment","showSureCheck","setShowSurecheck","displayContent","comment","content","postId","email","authed","CommentForm","style","padding","onSubmit","handleSubmit","htmlFor","name","id","type","onChange","handleChange","formData","height","width","resize","PostDetails","postData","setPostData","commentsData","setCommentsData","postLoading","setPostLoading","commentLoading","setCommentLoading","showComment","setShowComment","setFormData","useParams","postLink","commentsLink","comments","e","preventDefault","fetch","method","mode","body","stringify","log","newComment","now","prevCommentsData","prevShowComment","target","prevFormData","LoginForm","placeholder","password","togglePersist","checked","errMsg","LOGIN_ENDPOINT","Login","from","useLocation","state","pathname","setErrMsg","credentials","replace","setItem","prevPersist","Unauthorized","RequireAuth","PersistLogin","isMounted","verifyRefreshToken","PostForm","itemStyle","margin","textData","newTextData","setTextData","publish","WritePost","newPost","published","UnpublishedPosts","controller","AbortController","getPosts","signal","abort","EditForm","handlePublishToggle","EditPost","setPublished","catch","patch","element","path","Home","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d5aed76f.chunk.js","sourcesContent":["import React from \"react\"\n\nexport default function Footer(){\n    return (\n       <></>\n    )\n}","import { createContext, useState } from \"react\";\n\nconst AuthContext = createContext({});\n\nexport const AuthProvider = ({ children }) => {\n    const [auth, setAuth] = useState({});\n    const [persist, setPersist] = useState(JSON.parse(localStorage.getItem(\"persist\")) || false )\n    return (\n        <AuthContext.Provider value={{ auth, setAuth, persist, setPersist }}>\n            {children}\n        </AuthContext.Provider>\n    )\n}\n\nexport default AuthContext;","import { useContext, useDebugValue } from \"react\";\nimport AuthContext from \"../context/AuthProvider\";\n\nconst useAuth = () => {\n    const { auth } = useContext(AuthContext);\n    useDebugValue(auth, auth => auth?.accessToken ? \"Logged In\" : \"Logged Out\")\n    return useContext(AuthContext);\n}\n\nexport default useAuth;","import axios from 'axios';\nconst BASE_URL = 'https://guarded-bayou-20255.herokuapp.com/';\n\nexport default axios.create({\n    baseURL: BASE_URL\n});\n\nexport const axiosPrivate = axios.create({\n    baseURL: BASE_URL,\n    headers: { 'Content-Type': 'application/json' },\n    withCredentials: true\n});","import React from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport AuthProvider from \"../context/AuthProvider\"\nimport useAuth from \"../hooks/useAuth\"\nimport axios from \"../api/axios\"\n\n\nexport default function Header() {\n  let navigate = useNavigate(); \n  const { auth } = React.useContext(AuthProvider)\n  const { setAuth } = useAuth();\n  function sendUnpublished(){\n    navigate(\"/unpublished\")\n  }\n  function sendHome(){\n    navigate(\"/\")\n  }\n  function sendLogin(){\n    navigate(\"/login\")\n  }\n  function sendWritePost(){\n    navigate(\"/write-post\")\n  }\n  const logout = async () => {\n    setAuth({});\n    try {\n      const res = await axios(\"/users/logout\", {\n        withCredentials: true\n      })\n    } catch (err){\n      console.error(err);\n    }\n  }\n\n  return (\n    <nav>\n\n      <ul className=\"navbar\">\n        {auth?.accessToken && <li><button className=\"nav-button\" onClick={sendWritePost}>Write new post</button></li>}\n        {auth?.accessToken && <li><button className=\"nav-button\" onClick={sendUnpublished}>Unpublished</button></li>}\n        <li><button className=\"nav-button\" onClick={sendHome}>Home</button></li>\n        \n        {auth?.accessToken ? <li><button className=\"nav-button\" onClick={logout}>Logout</button></li> :<li><button className=\"nav-button\" onClick={sendLogin}>Sign in</button></li>}\n      </ul>\n    </nav>\n  );\n}\n","import useAuth from \"./useAuth\";\nimport axios from \"../api/axios\"\n\nconst useRefreshToken = () => {\n  const { setAuth } = useAuth();\n\n  const refresh = async () => {\n    const response = await axios.get(\"/refresh\", {\n      \"Content-Type\": \"application/json\",\n      withCredentials: true\n    });\n    setAuth(prev => {\n\n      return {...prev, accessToken: response.data.accessToken}\n    })\n    return response.data.accessToken;\n  }\n  return refresh;\n};\n\nexport default useRefreshToken;\n","import { axiosPrivate } from \"../api/axios\";\nimport { useEffect } from \"react\"\nimport useRefreshToken from \"./useRefreshToken\";\nimport useAuth from \"./useAuth\";\n\nconst useAxiosPrivate = () => {\n    const refresh = useRefreshToken();\n    const { auth } = useAuth();\n\nuseEffect(() => {\n\n    const requestIntercept = axiosPrivate.interceptors.request.use(\n        config => {\n            if (!config.headers[\"Authorization\"]) {\n                config.headers[\"Authorization\"] = `Bearer ${auth?.accessToken}`;\n            }\n            return config;\n        }, (err) => Promise.reject(err)\n    );\n\n    const responseIntercept = axiosPrivate.interceptors.response.use(\n        response => response,\n        async (err) => {\n            const prevRequest = err?.config;\n            if (err?.response?.status === 403 && !prevRequest?.sent) {\n                prevRequest.sent =true;\n                const newAccessToken = await refresh()\n                prevRequest.headers[\"Authorization\"] = `Bearer ${newAccessToken}`\n                return axiosPrivate(prevRequest)\n            }\n            return Promise.reject(err);\n        }\n    );\n\n    return () => {\n        axiosPrivate.interceptors.request.eject(requestIntercept)\n        axiosPrivate.interceptors.response.eject(responseIntercept)\n    }\n},[auth, refresh])\n\n    return axiosPrivate;\n}\n\nexport default useAxiosPrivate;","import React from \"react\";\n\nexport default function SureCheck(props) {\n  return <div className=\"sureCheck\">\n      Are you sure you want to delete this?\n      <button className=\"sureButton\" onClick={props.handleDelete}>Yes</button>\n      <button className=\"sureButton\" onClick={props.handleToggle}>No</button>\n  </div>;\n}\n","import React from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport ReactMarkdown from 'react-markdown'\nimport gfm from \"remark-gfm\"\nimport AuthProvider from \"../context/AuthProvider\"\nimport useAxiosPrivate from \"../hooks/useAxiosPrivate\";\nimport axios from \"../api/axios\";\nimport SureCheck from \"./SureCheck\";\n\nexport default function Post(props) {\n  const [commentCount, setCommentCount] = React.useState({});\n  const [loading, setLoading] = React.useState(true);\n  const [displaySure, setDisplaySure] = React.useState(false)\n  const { auth } = React.useContext(AuthProvider);\n  const axiosPrivate = useAxiosPrivate();\n  const navigate = useNavigate();\n  const toggleSure = () => {setDisplaySure(prevDisplaySure => !prevDisplaySure)}\n  const handleDelete = async () => {\n    await axiosPrivate.delete(\"/posts/\" + props.post._id)\n    window.location.reload()\n  }\n  const sendEdit = () => {\n    navigate(\"/edit/\" + props.post._id)\n  }\n  const link =\n    \"/posts/\" + props.post._id + \"/comment-count/\";\n  React.useEffect(() => {\n    axios.get(link)\n      .then((res) => setCommentCount(res.data))\n      .then(() => setLoading(false));\n  }, [link]);\n  //splitting text into array to display new lines properly\n  const textArray = props.post.text.split(\"\\n\");\n  const displayText = textArray.map((item, counter) => <ReactMarkdown key={counter} remarkPlugins={[gfm]}>{item}</ReactMarkdown>);\n  const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\n  const date = new Date(props.post.timestamp)\n  return (\n    <div className=\"post-wrapper\">\n      <h1 className=\"post-title\">\n        {props.link ? (\n          <Link to={`post/${props.post._id}`}>{props.post.title} </Link>\n        ) : (\n          props.post.title\n        )}\n      </h1>\n        <span className=\"by-text\">by: </span>\n        {props.post.user?.username}\n        <br />\n        <br />\n      <small>\n      {date.getHours()}:{date.getMinutes()} {date.toLocaleDateString(undefined ,options)} \n      </small>\n      {displayText}\n      {auth?.accessToken && <><button className=\"button\" onClick={toggleSure}>Delete</button> <button className=\"button\" onClick={sendEdit}>Edit</button><br/></>}\n      {displaySure && <SureCheck handleToggle={toggleSure} handleDelete={handleDelete}/>}\n      {props.link && !loading && (\n        <Link to={`post/${props.post._id}`}>\n          <><small className=\"comment-count\"><br/>{commentCount.count} comments</small> </>{\" \"}\n        </Link>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport Post from \"./Post\";\nimport axios from \"../api/axios\";\n\nexport default function Main(props) {\n  const [postsData, setPostsData] = React.useState([])\n  const [loading, setLoading] = React.useState(true);\n\n  //FETCH POSTS AND ADD THEM TO STATE\n  React.useEffect(() => {\n    axios.get(\"/posts\")\n        .then(res => setPostsData(res.data))\n        .then(() => setLoading(false))\n  },[setPostsData]);\n  let loadingSpinner =<div className=\"loader\">Loading...</div>\n  const posts = <ul>\n  {postsData.map((post) => {\n      return <li key={post._id} ><Post link={true} post={post}/> </li>\n  })} </ul>\n  return (\n    <div>\n      {loading ? <div>{loadingSpinner} </div>: <div>{posts}</div>}\n    </div>\n  );\n}\n","import Footer from \"./Footer\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport React from \"react\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Header />\n      <Main />\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport { axiosPrivate } from \"../api/axios\";\nimport SureCheck from \"./SureCheck\"\nimport styled from \"styled-components\"\n\nconst Div = styled.div`\n\n`\nconst Content = styled.p`\nmargin-left: 20px;\nfont-size: 80%;\n`\nconst Author = styled.small`\nfont-size: 70%\n\n`\nexport default function Comment(props) {\n  const [showSureCheck, setShowSurecheck] = React.useState(false)\n  const contentArray = props.comment.content.split(\"\\n\")\n  const displayContent = contentArray.map((item, counter) => <Content key={counter}> {item}</Content>);\n  const toggleSure = () => {\n    setShowSurecheck(prev => !prev)\n  }\n  const handleDelete = async () => {\n    await axiosPrivate.delete(\"/posts/\" + props.postId + \"/comments/\" + props.comment._id)\n    window.location.reload()\n  }\n  const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\n  const date = new Date(props.comment.timestamp)\n  return (\n    <Div>\n      <Author>From: {props.comment.email} on {date.toLocaleDateString(undefined ,options)} {date.getHours()}:{date.getMinutes()} </Author>\n      {displayContent}\n      {props.authed && < button className=\"button\" onClick={toggleSure}>Delete</button>}\n      {showSureCheck && <SureCheck handleDelete={handleDelete} handleToggle={toggleSure}/> }\n    </Div>\n  );\n}\n","import React from \"react\";\n\nexport default function CommentForm(props) {\n  const contentStyle = {\n    height: \"100px\",\n    width: \"500px\",\n    resize: \"none\",\n  };\n  const formStyle = {\n    padding: \"20px\",\n  };\n\n  return (\n    <form style={formStyle}  onSubmit={props.handleSubmit}>\n      <label htmlFor=\"email\">\n        <small>Email: </small>\n      </label>\n      <br />\n      <input name=\"email\" id=\"comment-email\" type=\"email\" onChange={props.handleChange} value={props.formData.email}/> <br />\n      <label htmlFor=\"comment-content\">\n        <small>Comment: </small>\n      </label>\n      <br />\n      <textarea id=\"comment-content\" name=\"content\" style={contentStyle} onChange={props.handleChange} value={props.formData.content}/>\n      <br />\n      <button className=\"button\">Submit</button>\n    </form>\n  );\n}\n","import React from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Post from \"./Post\";\nimport Comment from \"./Comment\";\nimport CommentForm from \"./CommentForm\";\nimport { useParams } from \"react-router-dom\";\nimport AuthProvider from \"../context/AuthProvider\"\nimport axios from \"../api/axios\";\n\n\nexport default function PostDetails() {\n  const [postData, setPostData] = React.useState({});\n  const [commentsData, setCommentsData] = React.useState([]);\n  const [postLoading, setPostLoading] = React.useState(true);\n  const [commentLoading, setCommentLoading] = React.useState(true);\n  const [showComment, setShowComment] = React.useState(false);\n  const [formData, setFormData] = React.useState({\n    email: \"\",\n    content: \"\",\n  });\n  const { auth } = React.useContext(AuthProvider);\n  const { id } = useParams();\n  const postLink = \"/posts/\" + id;\n  const commentsLink = postLink + \"/comments/\";\n\n  //GET POST AND COMMENTS FROM API\n  React.useEffect(() => {\n    axios.get(postLink)\n      .then((res) => setPostData(res.data))\n      .then(() => setPostLoading(false))\n    axios.get(commentsLink)\n      .then((res) => setCommentsData(res.data))\n      .then(() => setCommentLoading(false));\n  }, [commentsLink, postLink]);\n  const comments = (\n    <ul>\n      {commentsData.map((comment) => {\n        return (\n          <li key={comment._id}>\n            <Comment authed = {auth.accessToken? true : false}comment={comment} postId={id} />{\" \"}\n          </li>\n        );\n      })}{\" \"}\n    </ul>\n  );\n  //toggle the comment form\n  function toggleComment() {\n    setShowComment((prevShowComment) => !prevShowComment);\n  }\n  //form controller for CommentForm component\n  function handleChange(e) {\n    const { name, value } = e.target;\n    setFormData((prevFormData) => {\n      return {\n        ...prevFormData,\n        [name]: value,\n      };\n    });\n  }\n\n  let loadingSpinner = <div className=\"loader\">Loading...</div>;\n  //submit function for the commentform compoonent\n  async function handleSubmit(e) {\n    e.preventDefault();\n    try {\n      const link = \"https://guarded-bayou-20255.herokuapp.com/posts/\" + id + \"/comments/\";\n      let res = await fetch(link, {\n        method: \"POST\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          email: formData.email,\n          content: formData.content,\n          post: id,\n        }),\n      });\n      if (res.status === 201) {\n        console.log(\"comment created\");\n        //changing the commentsdata state to re-render the comments and resetting the form\n        let counter = 0;\n        let newComment = {\n          email: formData.email,\n          content: formData.content,\n          timestamp: Date.now(),\n          _id: counter\n        };\n        counter++;\n        setCommentsData((prevCommentsData) => [newComment, ...prevCommentsData]);\n        setFormData({\n          email: \"\",\n          content: \"\"\n        })\n      } else {\n        console.log(\"error\");\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  return (\n    <div className=\"app\">\n      <Header />\n      {/* if the post or the comments are still loading show the loading spinner */}\n      <div>\n        {postLoading || commentLoading ? (\n          <div>{loadingSpinner}</div>\n        ) : (\n          <div>\n            <Post post={postData} link={false} /> {comments}{\" \"}\n          </div>\n        )}\n      </div>\n      <button  onClick={toggleComment} className=\"button\">\n        Post comment\n      </button>\n      {showComment && (\n        <CommentForm\n          handleSubmit={handleSubmit}\n          handleChange={handleChange}\n          formData={formData}\n        />\n      )}\n      <Footer />\n    </div>\n  );\n}\n","import useAuth from \"../hooks/useAuth\";\nexport default function LoginForm(props) {\n  const { persist } = useAuth();\n  return (\n    <form onSubmit={props.handleSubmit}>\n      <br />\n      <label htmlFor=\"username\">Username:</label>\n      <input\n        name=\"username\"\n        id=\"login-username\"\n        type=\"username\"\n        placeholder=\"Username\"\n        onChange={props.handleChange}\n        value={props.formData.username}\n      />\n      <br />\n      <br />\n      <label htmlFor=\"password\">Password:</label>\n      <input\n        name=\"password\"\n        id=\"login-password\"\n        type=\"password\"\n        placeholder=\"*******\"\n        onChange={props.handleChange}\n        value={props.formData.password}\n      />\n      <br />\n      <br />\n      <button className=\"button\">Login</button>\n\n      <div className=\"persist-check\">\n        <input\n          type=\"checkbox\"\n          id=\"persist\"\n          onChange={props.togglePersist}\n          checked={persist}\n        />\n        <label htmlFor=\"persist\">Trust this device?</label>\n      </div>\n      {props.errMsg && <p className=\"error\">{props.errMsg}</p>}\n    </form>\n  );\n}\n","import React from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport axios from '../api/axios';\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport LoginForm from \"./LoginForm\";\nimport useAuth from \"../hooks/useAuth\";\n\nconst LOGIN_ENDPOINT = \"/users/login\"\n\nexport default function Login() {\n  const { setAuth, persist, setPersist } = useAuth();\n\n  const navigate = useNavigate();\n  const location = useLocation()\n  const from = location.state?.from?.pathname || \"/\"\n\n  const [formData, setFormData] = React.useState({\n    username: \"\",\n    password: \"\",\n    email: \"\",\n  });\n  \n  const [errMsg, setErrMsg] = React.useState(\"\");\n  //controlling the login form\n  function handleChange(e) {\n    const { name, value } = e.target;\n    setFormData((prevFormData) => {\n      return {\n        ...prevFormData,\n        [name]: value,\n      };\n    });\n  }\n  //sends the data to the api and gets back the token\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const credentials = ({\n      username: formData.username,\n      password: formData.password,\n    });\n    try {\n      const response = await axios.post(LOGIN_ENDPOINT,\n        JSON.stringify(credentials), \n        {\n          headers: {\"Content-Type\": \"application/json\" },\n          withCredentials: true\n        }\n      )\n\n      const accessToken = response?.data?.accessToken;\n\n      setAuth({user: formData.username, password: formData.password, accessToken: accessToken});\n      navigate(from, { replace: true})\n    } catch(err) {\n      if (!err?.response) {\n        setErrMsg(\"No server response\")\n      } else {\n        console.log(err.response)\n        const status = err.response.status;\n        if (status === 400) {\n          setErrMsg(\"Missing username or password\")\n        }\n        else if (status === 401) {\n          setErrMsg(\"Unauthorized\")\n        }\n        else if (status === 404){\n          setErrMsg(\"User not found\")\n        }\n        else {\n          setErrMsg(\"login failed\")\n        }\n      }\n    }\n  }\n  //handles trust this device checkbox\n  const togglePersist = () => {\n    setPersist(prevPersist => !prevPersist)\n  }\n  React.useEffect(() => {\n    localStorage.setItem(\"persist\", persist)\n  }, [persist])\n  return (\n    <div>\n      <Header />\n      <p>Sample user:</p>\n      <p>Username: cane2 - Password: blabla</p>\n      <LoginForm\n        handleSubmit={handleSubmit}\n        handleChange={handleChange}\n        formData={formData}\n        errMsg={errMsg}\n        togglePersist={togglePersist}\n      />\n      <Footer />\n    </div>\n  );\n}\n","const Unauthorized = () => {\n    return (<div></div>  );\n}\n \nexport default Unauthorized;","import { useLocation, Navigate, Outlet} from \"react-router-dom\"\nimport useAuth from \"../hooks/useAuth\";\n\nconst RequireAuth = () => {\n    const { auth } = useAuth();\n    const location = useLocation();\n    return (\n        auth?.accessToken\n            ? <Outlet />\n            : <Navigate to=\"/login\" state={{ from: location}} replace />\n    );\n}\n\nexport default RequireAuth;","import { Outlet } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport useRefreshToken from \"../hooks/useRefreshToken\";\nimport useAuth from \"../hooks/useAuth\";\n\nconst PersistLogin = () => {\n  const [loading, setLoading] = useState(true);\n  const refresh = useRefreshToken();\n  const { auth, persist } = useAuth();\n\n  useEffect(() => {\n    let isMounted = true;\n    const verifyRefreshToken = async () => {\n      try {\n        await refresh();\n      } catch (err) {\n        console.error(err);\n      } finally {\n        isMounted && setLoading(false);\n      }\n    };\n\n    !auth?.accessToken && persist ? verifyRefreshToken() : setLoading(false);\n    return () => (isMounted = false);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    console.log(`loading ${loading}`);\n  }, [loading, auth?.accessToken]);\n\n  return (\n    <>\n      {!persist \n        ? <Outlet /> \n        : loading \n          ? <p>loading...</p> \n          : <Outlet />\n      }\n    </>\n  );\n};\n\nexport default PersistLogin;\n","import React from \"react\";\nimport MDEditor from '@uiw/react-md-editor';\n\nexport default function PostForm(props) {\n  const itemStyle={\n    margin: \"5px\",\n  }\n  return (\n    <form>\n      <br />\n        <label htmlFor=\"title\" >Title:</label> <br />\n        <input style={itemStyle} name=\"title\" id=\"post-title\" type=\"text\" value={props.formData.title} onChange={props.handleChange}/>\n        <br />\n        <MDEditor style={itemStyle} value={props.textData} height={500} onChange={(newTextData = \"\") => props.setTextData(newTextData)} name=\"text\"/>\n        <label htmlFor=\"publish\">Publish immediately?</label><input style={itemStyle} type=\"checkbox\" name= \"publish\" checked={props.formData.publish} onChange={props.handleChange}/>\n        <br/>\n        <button style={itemStyle} onClick={props.handleSubmit}>Submit</button>\n    </form>\n  );\n}\n","import React from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport PostForm from \"./PostForm\";\nimport useAxiosPrivate from \"../hooks/useAxiosPrivate\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\n\nexport default function WritePost() {\n  const axiosPrivate = useAxiosPrivate();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [formData, setFormData] = React.useState({\n    title: \"\",\n    publish: true,\n  });\n  const [textData, setTextData] = React.useState(\"\");\n  function handleChange(e) {\n    const { name, value, type } = e.target;\n    setFormData((prevFormData) => {\n      if (type === \"checkbox\") {\n        return {\n          ...prevFormData,\n          [name]: !prevFormData.publish,\n        };\n      }\n      return {\n        ...prevFormData,\n        [name]: value,\n      };\n    });\n  }\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const newPost = {\n      title: formData.title,\n      published: formData.publish,\n      text: textData,\n    };\n    axiosPrivate.post(\"/posts\", newPost).then(\n      (res) => {\n        console.log(res);\n        navigate(\"/\");\n      },\n      (err) => {\n        console.log(err);\n      }\n    );\n  }\n  return (\n    <div>\n      <Header />\n      <PostForm\n        formData={formData}\n        handleChange={handleChange}\n        textData={textData}\n        setTextData={setTextData}\n        handleSubmit={handleSubmit}\n      />\n      <Footer />\n    </div>\n  );\n}\n","import React from \"react\";\nimport Post from \"./Post\";\nimport useAxiosPrivate from \"../hooks/useAxiosPrivate\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport Header from \"./Header\"\nimport Footer from \"./Footer\"\n\nexport default function UnpublishedPosts(props) {\n  const [postsData, setPostsData] = React.useState([])\n  const [loading, setLoading] = React.useState(true);\n  const axiosPrivate = useAxiosPrivate();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  //FETCH POSTS AND ADD THEM TO STATE\n  React.useEffect(() => {\n      let isMounted = true;\n      const controller = new AbortController()\n      const getPosts = async () => {\n        try {\n            const res = await axiosPrivate.get(\"/posts/unpublished\", {\n                signal: controller.signal\n            })\n            isMounted && setPostsData(res.data)\n            setLoading(false);\n        } catch (err) {\n            console.error(err)\n            navigate(\"/login\", { state: { from: location}, replace: true})\n        }\n      }\n      getPosts();\n\n      return () => {\n          isMounted = false;\n          controller.abort()\n      }\n\n  },[axiosPrivate, location, navigate]);\n  let loadingSpinner =<div className=\"loader\">Loading...</div>\n  const posts = <ul>\n  {postsData.map((post) => {\n      return <li key={post._id} ><Post link={true} post={post}/> </li>\n  })} </ul>\n  return (\n    <div>\n      <Header />\n      {loading ? <div>{loadingSpinner} </div>: <div>{posts}</div>}\n      <Footer />\n    </div>\n  );\n}\n","import MDEditor from \"@uiw/react-md-editor\";\nfunction EditForm(props) {\n  const itemStyle = {\n    margin: \"5px\",\n  };\n  return (\n    <form>\n      <br />\n      <MDEditor\n        style={itemStyle}\n        value={props.textData}\n        height={500}\n        onChange={(newTextData = \"\") => props.setTextData(newTextData)}\n        name=\"text\"\n      />\n      <label htmlFor=\"publish\">Publish?</label>\n      <input\n        style={itemStyle}\n        type=\"checkbox\"\n        name=\"published\"\n        checked={props.published}\n        onChange={props.handlePublishToggle}\n      />\n      <br />\n      <button style={itemStyle} onClick={props.handleSubmit}>\n        Submit\n      </button>\n    </form>\n  );\n}\n\nexport default EditForm;\n","import React from \"react\";\nimport useAxiosPrivate from \"../hooks/useAxiosPrivate\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport { useParams } from \"react-router-dom\";\nimport EditForm from \"./EditForm\";\nimport {useNavigate} from \"react-router-dom\"\n\nfunction EditPost(props) {\n  const { id } = useParams();\n  const [published, setPublished] = React.useState();\n  const [textData, setTextData] = React.useState(\"\");\n  const [loading, setLoading] = React.useState(true);\n  let navigate = useNavigate();\n  function handlePublishToggle() {\n    setPublished((prev) => !prev);\n  }\n  const axiosPrivate = useAxiosPrivate();\n  React.useEffect(() => {\n    axiosPrivate\n      .get(\"/posts/\" + id)\n      .then(function (res) {\n        setTextData(res.data?.text);\n        setPublished(res.data?.published);\n        setLoading(false);\n      })\n      .catch(function (err) {\n        console.log(err);\n      });\n  }, [id, axiosPrivate]);\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n        await axiosPrivate.patch(\"/posts/\" + id, {text: textData, published: published})\n        navigate(\"/\")\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  return (\n    <div>\n      <Header />\n      {!loading && (\n        <EditForm\n          handlePublishToggle={handlePublishToggle}\n          textData={textData}\n          setTextData={setTextData}\n          published={published}\n          handleSubmit={handleSubmit}\n        />\n      )}\n      <Footer />\n    </div>\n  );\n}\n\nexport default EditPost;\n","import \"./App.css\";\n\nimport Home from \"./components/Home\";\nimport PostDetails from \"./components/PostDetails\";\nimport Login from \"./components/Login\";\nimport React from \"react\";\nimport { BrowserRouter, HashRouter, Routes, Route } from \"react-router-dom\";\nimport { AuthProvider } from \"./context/AuthProvider\";\nimport Unauthorized from \"./components/Unauthorized\";\nimport RequireAuth from \"./components/RequireAuth\";\nimport PersistLogin from \"./components/PersistLogin\";\nimport WritePost from \"./components/WritePost\";\nimport UnpublishedPosts from \"./components/UnpublishedPosts\";\nimport EditPost from \"./components/EditPost\";\n\nfunction App() {\n  return (\n    <HashRouter>\n      <AuthProvider>\n        <Routes>\n          <Route element={<PersistLogin />}>\n            {/* public routes */}\n            <Route path=\"/\" element={<Home />} />\n            <Route path=\"post/:id\" element={<PostDetails />} />\n            <Route path=\"/login\" element={<Login />} />\n            <Route path=\"/unauthorized\" element={<Unauthorized />} />\n            {/* protected routes */}\n            <Route element={<RequireAuth />}>\n              <Route path=\"/write-post\" element={<WritePost />} />\n              <Route path=\"/unpublished\" element={<UnpublishedPosts />} />\n              <Route path=\"/edit/:id\" element={<EditPost />} />\n            </Route>\n          </Route>\n        </Routes>\n      </AuthProvider>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}